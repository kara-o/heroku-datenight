(this["webpackJsonpdatenight-frontend"]=this["webpackJsonpdatenight-frontend"]||[]).push([[0],{107:function(e,t,n){e.exports=n(119)},119:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(17),i=n.n(l),c=n(5),o=n(43),u=n(8);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={"Content-Type":"application/json",Accept:"application/json"},f=function(e){return{"access-token":e.accessToken,"token-type":"Bearer",client:e.client,expiry:e.expiry,uid:e.uid}},p=function(e,t){var n=f(t);return fetch("".concat("/api/v1","/").concat(e,"/"),{method:"GET",headers:m({},d,{},n)}).then((function(e){return e.json()}))},h=function(e,t){var n=f(e);return fetch("".concat("/api/v1","/users/").concat(e.id,"/requests/").concat(t),{method:"GET",headers:m({},d,{},n)}).then((function(e){return e.json()}))},g=n(45),b=n(146),v=Object(g.a)({root:{background:"#F0F7F4",borderRadius:3,border:0,height:48,padding:"0 30px",margin:"20px 10px 0px 10px",color:"black","&:hover":{background:"#5D737E",color:"white",cursor:"pointer"},boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2), 0px 5px 8px 0px rgba(0,0,0,0.14), 0px 1px 14px 0px rgba(0,0,0,0.12)"},label:{textTransform:"uppercase"}}),E=function(e){var t=e.type,n=void 0===t?"button":t,a=e.onClick,l=e.children,i=v();return r.a.createElement(b.a,{onClick:function(){return a()},classes:{root:i.root,label:i.label},type:n},l)},y=n(7),O=Object(y.a)({form:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"space-evenly"},formContainer:{"@media all and (max-width: 599px)":{width:"400px"},"@media all and (min-width: 600px)":{width:"500px"}}}),j=function(e){var t=e.children,n=e.styles,a=O();return r.a.createElement(_e,{styles:a.formContainer+" "+n},r.a.createElement("form",{className:a.form},t))},w=Object(y.a)({container:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}}),x=function(e){var t=e.title,n=void 0===t?null:t,a=e.filter,l=void 0===a?null:a,i=e.children,c=e.styles,o=w();return r.a.createElement("div",{className:c+" "+o.container},n?r.a.createElement("h1",{className:"title-fantasy-font"},n):null,l,r.a.createElement(ae,{className:o.list},i))},k=n(48),C=Object(y.a)({link:{textDecoration:"none",color:"black","&:hover":{color:"#533747",fontWeight:"bold"}}}),_=function(e){var t=e.children,n=e.destination,a=e.onClick,l=e.addressCancel,i=e.styles,c=C();return r.a.createElement(k.b,{className:c.link+" "+i,to:{pathname:n,state:{addressCancel:l}},onClick:a},t)},D=Object(y.a)({listItem:{display:"grid",gridTemplateRows:"none",justifyItems:"center",textAlign:"center","&:hover":{backgroundColor:"#F0F7F4"}},fourColumns:{gridTemplateColumns:"[col1-start] 1fr [col1-end col2-start] 1fr [col2-end col3-start] 1fr [col3-end col4-start] 1fr [col4-end]"},twoColumns:{gridTemplateColumns:"[col1-start] 1fr [col1-end col2-start] 1fr [col2-end]"},threeColumns:{gridTemplateColumns:"[col1-start] 1fr [col1-end col2-start] 1fr [col2-end col3-start] 1fr [col3-end]"},outerLi:{width:"100%"}}),S=function(e){var t=e.children,n=e.destination,a=e.id,l=e.styles,i=D();return r.a.createElement("li",{className:i.outerLi,key:a},r.a.createElement(_,{destination:n},r.a.createElement("span",{className:i.listItem+" "+i["".concat(l)]},t)))},N=function(e){var t=e.url,n=e.width,a=void 0===n?null:n,l=e.height,i=void 0===l?null:l;return r.a.createElement("iframe",{width:a||"100%",height:i||"100%",frameBorder:"0",style:{border:"none"},allowFullScreen:!0,src:t})},P=n(148),T=Object(y.a)({container:{width:"200px",height:"200px",position:"relative",padding:"10px",marginBottom:"10px"},details:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute"}}),A=function(e){var t=e.pkgItem,n=e.handleDelete,l=T(),i=Object(a.useState)(!1),o=Object(c.a)(i,2),u=o[0],s=o[1];return r.a.createElement(P.a,{elevation:5,key:t.id,className:l.container},r.a.createElement("div",{className:l.details},r.a.createElement("p",{onClick:function(){s(!0)}},t.place),r.a.createElement("p",null,t.duration," minutes"),r.a.createElement(E,{onClick:function(){return n(t.id)}},"Remove")),u?r.a.createElement(G,{acceptText:"Back",startOpen:!0,navigateAwayAction:function(){return s(!1)}},r.a.createElement("h3",null,t.place),r.a.createElement("p",null,t.blurb)):null)},I=Object(y.a)({container:{gridArea:"footer",display:"grid",justifyItems:"center",alignItems:"center",width:"100%",backgroundColor:"#533747"},flex:{display:"flex",flexFlow:"row wrap",justifyContent:"space-evenly",alignItems:"center",width:"100%"},title:{fontSize:"48px",marginBottom:"0px"},copyright:{fontSize:"12px"},link:{"&:hover":{fontWeight:"bold",color:"black"}}}),q=function(){var e=I();return r.a.createElement("footer",{className:e.container},r.a.createElement(ue,null),r.a.createElement("h1",{className:e.title+" title-fantasy-font"},"DateNight"),r.a.createElement("div",null,r.a.createElement(_,{styles:e.link},"About")," \u2022"," ",r.a.createElement(_,{styles:e.link},"Contact")),r.a.createElement("p",{className:e.copyright},"Established \u2665 2020"))},F=Object(y.a)({container:{gridColumn:"1/3",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},link:{margin:"20px"}}),R=function(e){var t=e.title,n=e.link,a=void 0===n?null:n,l=e.children,i=F();return r.a.createElement("div",{className:i.container},r.a.createElement("h1",{className:"title-fantasy-font"},t),l,a?r.a.createElement(_,{styles:i.link,destination:a.destination},a.text):null)},M=Object(y.a)({navbar:{gridArea:"navbar",display:"grid",gridTemplateColumns:"[col1-start] 1fr [col1-end col2-start] 1fr [col2-end col3-start] 1fr [col3-end]",gridTemplateRows:"auto",justifyItems:"center",alignItems:"center",width:"100%",position:"relative"}}),L=function(e){var t=e.logoutUser,n=e.logoutAdmin,a=e.userData,l=M();return r.a.createElement("nav",{className:l.navbar},a&&!a.admin?r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{destination:"/"},"Home"),r.a.createElement(_,{destination:"/requests/new"},"Make A New Request!")):null,a&&a.admin?r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{destination:"/admin/"},"Requests"),r.a.createElement(_,{destination:"/admin/itinerary_packages"},"Packages")):null,r.a.createElement(_,{destination:a.admin?"/admin/login":"/login",onClick:function(){a.admin?n():t()}},"Logout"))},Y=n(155),B=Object(g.a)({root:{margin:"10px",width:"250px"},tel:{margin:"10px",width:"150px"}}),J=function(e){var t=e.type,n=e.name,a=e.value,l=e.onChange,i=e.placeholder,c=e.blurb,o=void 0!==c&&c,u=B();return"tel"===t?r.a.createElement(Y.a,{classes:{root:u.tel},id:"outlined-basic",label:i,variant:"outlined",type:t,name:n,value:a,onChange:l}):o?r.a.createElement(Y.a,{classes:{root:u.root},id:"outlined-multiline-flexible",label:i,multiline:!0,rowsMax:4,type:t,name:n,value:a,onChange:l,variant:"outlined"}):r.a.createElement(Y.a,{classes:{root:u.root},id:"outlined-basic",label:i,variant:"outlined",type:t,name:n,value:a,onChange:l})},U=n(154),W=(Object(g.a)({filter:{textAlign:"center"},select:{fontSize:"16px"}}),function(e){var t=e.title,n=e.value,a=e.onChange,l=e.children,i=e.styles,c=Object(g.a)();return r.a.createElement("div",{className:c.filter+" "+i},r.a.createElement("label",null,t,r.a.createElement(U.a,{value:n,onChange:a,displayEmpty:!0,className:c.selectEmpty,inputProps:{"aria-label":"Without label"}},l)))}),z=Object(y.a)({container:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.6)",zIndex:"1"},modal:{position:"fixed",background:"white",width:"50%",height:"auto",maxHeight:"75%",overflow:"scroll",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"30px",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:"2"},button:{margin:"20px"},buttonDiv:{margin:"30px 0px 0px 0px",width:"100%"}}),G=function(e){var t=e.buttonText,n=void 0===t?null:t,l=e.children,i=e.acceptText,o=e.declineText,u=void 0===o?null:o,s=e.closeAction,m=void 0===s?null:s,d=e.navigateAwayAction,f=e.onClick,p=void 0===f?null:f,h=e.startOpen,g=void 0!==h&&h,b=Object(a.useState)(g),v=Object(c.a)(b,2),y=v[0],O=v[1],j=z(),w=function(){O(!1)};return r.a.createElement("div",null,n?r.a.createElement(E,{styles:j.button,onClick:function(e){p?p(e).then(O(!0)):O(!0)}},n):null,y?r.a.createElement("div",{className:j.container},r.a.createElement("div",{className:j.modal},l,r.a.createElement("div",{className:j.buttonDiv},u?r.a.createElement(E,{onClick:m?function(){w(),m()}:w,color:"primary"},u):null,r.a.createElement(E,{onClick:function(){d(),w()},color:"primary",styles:j.button},i)))):null)},H=Object(y.a)({container:{padding:"50px",textAlign:"center"}}),X=function(e){var t=e.children,n=e.styles,a=H();return r.a.createElement("div",{className:a.container+" "+n},t)},V=n(15),Z=Object(y.a)({container:{padding:"20px",marginBottom:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","@media all and (max-width: 599px)":{width:"400px",height:"700px"},"@media all and (min-width: 600px) and (max-width: 1099px)":{width:"550px",height:"750px"},"@media all and (min-width: 1100px)":{width:"650px",height:"850px"},position:"relative"},title:{margin:"0px",textAlign:"center"},button:{margin:"5px",top:"0px",right:"0px",position:"absolute",padding:"5px"},details:{width:"100%"}}),K=function(e){var t=e.item,n=e.admin,a=e.handleRemove,l=e.index,i=Z();return r.a.createElement(_e,{styles:i.container},n?r.a.createElement("button",{className:i.button,type:"button",onClick:function(){return a(t)}},"X"):null,r.a.createElement("h3",{className:i.title},function(e){var t=["th","st","nd","rd"],n=e%100;return e+(t[(n-20)%10]||t[n]||t[0])}(l+1)," Stop"),r.a.createElement("div",{className:i.details},r.a.createElement("p",null,V(t.arrival_time).format("h:mm a")),r.a.createElement("p",null,t.place),r.a.createElement("p",null,t.address),r.a.createElement("p",null,t.blurb),n&&t.make_res_link?r.a.createElement("p",null,r.a.createElement("a",{href:t.make_res_link,target:"_blank"},"Restaurant Link")):null,r.a.createElement("p",null,r.a.createElement("a",{href:t.map_url,target:"_blank"},"Google Map"))),r.a.createElement(N,{url:t.map_iframe_url}))},Q=n(152),$=function(){return r.a.createElement(Q.a,null)},ee=Object(y.a)({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%"},details:{marginTop:"0px",padding:"10px"},italic:{fontStyle:"italic"},title:{textAlign:"center"},paper:{width:"400px"}}),te=function(e){var t=e.title,n=e.request,a=e.children,l=e.admin,i=void 0!==l&&l,c=ee();return r.a.createElement("div",{className:c.container},r.a.createElement("h1",{className:c.title+" title-fantasy-font"},t),r.a.createElement(_e,{styles:c.paper},r.a.createElement("p",null,"Date: ",V(n.start_time).format("MMMM Do YYYY")),r.a.createElement("p",null,"Time: ",V(n.start_time).format("h:mm a")),r.a.createElement("p",null,"Party: ",n.party_size," people"),r.a.createElement("ul",null,function(e){return e.contacts.map((function(e,t){return r.a.createElement("li",{key:e.id},"Contact #",t+1,": ",e.phone)}))}(n)),r.a.createElement("p",null,"Neighborhood: ",n.neighborhood),r.a.createElement("p",null,"Price Range: ",n.price_range),r.a.createElement("p",null,"Notes:"," ",n.notes?n.notes:r.a.createElement("span",{className:c.italic},"none")),i?r.a.createElement("p",null,"Fulfilled: ",(!!n.fulfilled).toString()," ",n.cancelled?r.a.createElement("span",null,r.a.createElement("strong",{style:{color:"red"}}," - CANCELLED")):null):null),a)},ne=Object(y.a)({container:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",height:"100%",overflow:"auto",listStyle:"none",margin:"0",padding:"0"},paper:{width:"100%"}}),ae=function(e){var t=e.children,n=e.styles,a=ne();return r.a.createElement(_e,{styles:a.paper},r.a.createElement("ul",{className:a.container+" "+n},t))},re=function(e){var t=e.errors;console.log("errors: ",t);return r.a.createElement("ul",null,function(e){return e.map((function(e,t){return r.a.createElement("li",{key:t},e)}))}(t))},le=Object(y.a)({container:{display:"flex",flexDirection:"column",alignItems:"center"}}),ie=function(e,t,n){if(e.length){var a=function(e){return e.sort((function(e,t){var n=new Date(e.arrival_time),a=new Date(t.arrival_time);return n>a?1:n<a?-1:0}))}(e);return a.map((function(e){return r.a.createElement(K,{item:e,index:a.indexOf(e),admin:t,handleRemove:n})}))}return null},ce=function(e){var t=e.items,n=e.admin,a=void 0!==n&&n,l=e.handleRemove,i=void 0===l?null:l,c=e.children,o=le();return r.a.createElement("div",{className:o.container},r.a.createElement("h1",{className:o.title+" title-fantasy-font"},"Itinerary"),c,ie(t,a,i))},oe=Object(y.a)({background:{position:"absolute",zIndex:"-1",width:"200vw",left:"-100vw",height:"200px",backgroundColor:"#533747"}}),ue=function(){var e=oe();return r.a.createElement("div",{className:e.background})},se=Object(y.a)({container:{width:"calc(100% - 1em);",padding:"10px",marginBottom:"10px"}}),me=function(e){var t=e.legend,n=e.children,a=e.styles,l=se();return r.a.createElement("fieldset",{className:l.container+" "+a},r.a.createElement("legend",null,t),n)};function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe={"Content-Type":"application/json",Accept:"application/json"},he=function(e){var t;return t={},Object(u.a)(t,"access-token",e.accessToken),Object(u.a)(t,"token-type","Bearer"),Object(u.a)(t,"client",e.client),Object(u.a)(t,"expiry",e.expiry),Object(u.a)(t,"uid",e.uid),t},ge=function(e){var t=he(e);return fetch("".concat("/api/v1","/itinerary_packages"),{method:"GET",headers:fe({},pe,{},t)}).then((function(e){return e.json()}))},be=function(e,t){var n=he(e);return fetch("".concat("/api/v1","/itinerary_packages/").concat(t),{method:"GET",headers:fe({},pe,{},n)}).then((function(e){return e.json()}))},ve=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"All",a=he(e);return fetch("".concat("/api/v1","/scrapes"),{method:"POST",headers:fe({},pe,{},a),body:JSON.stringify({time:t,location:n})}).then((function(e){return e.json()}))};function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=Object(y.a)({reviewContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",width:"100%"},starsContainer:{fontSize:"24px"},smallPrint:{fontSize:"10px",margin:"0px"},smallPrintDiv:{marginTop:"5px"},boldText:{fontWeight:"bold"},feedbackFieldSet:{textAlign:"center",margin:"20px auto 0px auto",width:"100%"},italic:{fontStyle:"italic"},button:{marginTop:"20px"},paper:{width:"400px",display:"flex",flexDirection:"column",alignItems:"center"}}),je=function(e){var t=e.admin,n=void 0!==t&&t,l=e.request,i=e.userData,o=e.handleInvalidatedRequest,u=void 0===o?null:o,s=Oe(),p=Object(a.useState)({rating:0,feedback:""}),h=Object(c.a)(p,2),g=h[0],b=h[1],v=Object(a.useState)(l),y=Object(c.a)(v,2),O=y[0],j=y[1];return r.a.createElement("div",{className:s.reviewContainer},n&&!O.review?r.a.createElement("h1",{className:"title-fantasy-font"},"Not yet reviewed."):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title-fantasy-font"},n?"Review":"Your Review"),r.a.createElement(_e,{styles:s.paper},r.a.createElement("div",{className:s.starsContainer},r.a.createElement(xe,{styles:s.starsContainer,review:O.review?O.review:g,onClick:function(e){O.review||(g.rating&&g.rating===e?b(ye({},g,{rating:0})):b(ye({},g,{rating:e})))}})),O.review?O.review.feedback?r.a.createElement(me,{styles:s.feedbackFieldSet,legend:"Feedback"},r.a.createElement("p",null,O.review.feedback)):null:r.a.createElement(J,{blurb:!0,placeholder:"Any additional feedback?",value:g.feedback,onChange:function(e){return t=e.target.value,void b(ye({},g,{feedback:t}));var t}}),O.review?r.a.createElement("div",{className:s.smallPrintDiv},r.a.createElement("p",{className:s.smallPrint},"- Reviewed on"," ",V(O.review.created_at).format("MMMM Do YYYY, [at] h:mm:ss a")),O.review.admin_reviewed?r.a.createElement("p",{className:s.smallPrint},"- Admin acknowledged on"," ",V(O.review.admin_reviewed).format("MMMM Do YYYY, [at] h:mm:ss a")):n?r.a.createElement("label",{className:s.smallPrint},"Acknowledge"," ",r.a.createElement("input",{className:s.smallPrint,onChange:function(e){e.target.checked&&function(e,t,n,a){var r=he(e);return fetch("".concat("/api/v1","/requests/").concat(t,"/reviews/").concat(n),{method:"PATCH",headers:fe({},pe,{},r),body:JSON.stringify({admin_reviewed:a})}).then((function(e){return e.json()}))}(i,O.id,O.review.id,new Date).then((function(e){e.errors?console.log("There was an error updating the review"):(j(ye({},O,{review:e})),u(e.id))}))},type:"checkbox"})):r.a.createElement("p",{className:s.smallPrint+" "+s.italic},"Admin has not yet seen your review")):null),n||O.review?null:r.a.createElement(E,{styles:s.button,onClick:function(){(function(e,t,n){var a=n.rating,r=n.feedback,l=f(e);return fetch("".concat("/api/v1","/users/").concat(e.id,"/requests/").concat(t,"/reviews"),{method:"POST",headers:m({},d,{},l),body:JSON.stringify({rating:a,feedback:r})}).then((function(e){return e.json()}))})(i,O.id,g).then((function(e){j(ye({},O,{review:g})),console.log(e.request.review)}))}},"Submit Review")))},we=Object(y.a)({star:{"&:hover":function(e){return{cursor:e?"pointer":"default"}}}}),xe=function(e){var t=e.review,n=void 0===t?null:t,a=e.onClick,l=void 0===a?null:a,i=e.styles,c=void 0===i?null:i,o=we();return r.a.createElement("div",{className:c},[1,2,3,4,5].map((function(e){return r.a.createElement("span",{key:e,className:o.star,onClick:l?function(){return l(e)}:null},function(e){return n&&e<=n.rating?"\u2605":"\u2606"}(e))})))},ke=n(120),Ce=Object(y.a)({container:{padding:"20px",backgroundColor:"#F7FFF6"}}),_e=function(e){var t=e.children,n=e.styles,a=Ce();return r.a.createElement(ke.a,{className:a.container+" "+n,elevation:5},t)};function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=function(e){var t=Object(a.useState)({email:"",password:""}),n=Object(c.a)(t,2),l=n[0],i=n[1],s=Object(a.useState)(null),m=Object(c.a)(s,2),f=m[0],p=m[1],h=new URLSearchParams(Object(o.h)().search),g=!!h.get("account_confirmation_pending"),b=!!h.get("account_confirmation_success"),v=function(e){p(null),i(Se({},l,Object(u.a)({},e.target.name,e.target.value)))};return r.a.createElement(R,{title:"DateNight",link:{text:"New user? Sign up for an account",destination:"/signup"}},r.a.createElement(r.a.Fragment,null,g?r.a.createElement("h3",null,"Confirmation email sent - check your inbox!"):null,b?r.a.createElement("h3",null,"Thank you for confirming your account! Please login."):null,r.a.createElement(j,null,f?r.a.createElement(re,{errors:f}):null,r.a.createElement(J,{type:"text",name:"email",value:l.email,onChange:v,placeholder:"Email"}),r.a.createElement(J,{type:"password",name:"password",value:l.password,onChange:v,placeholder:"Password"}),r.a.createElement(E,{onClick:function(){var t;(function(e){return console.log(e),fetch("".concat("/auth","/sign_in"),{method:"POST",headers:d,body:JSON.stringify(e)})})(l).then((function(e){if(e.status<400){var n=e.headers.get("access-token"),a=e.headers.get("client"),r=e.headers.get("uid"),l=e.headers.get("expiry");t={accessToken:n,client:a,expiry:l,uid:r}}return e.json()})).then((function(n){n.errors?p(n.errors):(t=Se({},t,{user:n.data,admin:!1}),e.handleLogin(t),e.history.push("/"))})),i({email:"",password:""})}},"Login"))))};function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Te=function(e){var t=Object(a.useState)({password:"",password_confirmation:"",email:"",first_name:"",last_name:"",phone:""}),n=Object(c.a)(t,2),l=n[0],i=n[1],o=Object(a.useState)(null),s=Object(c.a)(o,2),m=s[0],f=s[1],p=function(e){f(null),i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l,Object(u.a)({},e.target.name,e.target.value)))};return r.a.createElement(R,{title:"Welcome",link:{text:"Back",destination:"/login"}},r.a.createElement(j,null,m?r.a.createElement(re,{errors:m}):null,r.a.createElement(J,{type:"text",name:"email",value:l.email,onChange:p,placeholder:"Email"}),r.a.createElement(J,{type:"password",name:"password",value:l.password,onChange:p,placeholder:"Password"}),r.a.createElement(J,{type:"password",name:"password_confirmation",value:l.password_confirmation,onChange:p,placeholder:"Confirm Password"}),r.a.createElement(J,{type:"text",name:"first_name",value:l.first_name,onChange:p,placeholder:"First Name"}),r.a.createElement(J,{type:"text",name:"last_name",value:l.last_name,onChange:p,placeholder:"Last Name"}),r.a.createElement(J,{type:"text",name:"phone",value:l.phone,onChange:p,placeholder:"Phone Number"}),r.a.createElement(E,{type:"button",onClick:function(){var t;(t=l,fetch("/auth",{method:"POST",headers:d,body:JSON.stringify(t)}).then((function(e){return e.json()}))).then((function(t){t.errors?f(t.errors.full_messages):e.history.push("/login?account_confirmation_pending=true")}))}},"Sign Up")))},Ae=n(161),Ie=n(72),qe=n(21),Fe=n(153),Re=n(157);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye=Object(y.a)({requestTitle:{marginBottom:"5px"},requestContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},helpLink:{fontStyle:"italic","&:hover":{color:"#533747",fontWeight:"bold",cursor:"pointer"},height:"18px"},column:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},noHelp:{gridColumn:"1/3"},withHelp:{gridColumn:"1/2"},filter:{marginTop:"20px",marginBottom:"20px"}}),Be=function(){var e=V().isoWeekday();return e<5?V().add(5-e,"days").toDate():e>5?V().add(7-e+5,"days").toDate():V().add(1,"week").toDate()},Je=function(e){var t=e.userData,n=Object(a.useState)({start_date:Be(),start_time:new Date(2e3,1,1,19,0,0),party_size:"",notes:""}),l=Object(c.a)(n,2),i=l[0],o=l[1],s=Object(a.useState)(""),h=Object(c.a)(s,2),g=h[0],b=h[1],v=Object(a.useState)(""),y=Object(c.a)(v,2),O=y[0],w=y[1],x=Object(a.useState)([]),k=Object(c.a)(x,2),C=k[0],_=k[1],D=Object(a.useState)([]),S=Object(c.a)(D,2),N=S[0],P=S[1],T=Object(a.useState)([t.user.phone]),A=Object(c.a)(T,2),I=A[0],q=A[1],F=Object(a.useState)(null),R=Object(c.a)(F,2),M=R[0],L=R[1],Y=Object(a.useState)(!1),B=Object(c.a)(Y,2),U=B[0],z=B[1],H=Object(a.useState)(!1),Z=Object(c.a)(H,2),K=Z[0],Q=Z[1],$=Ye();Object(a.useEffect)((function(){t&&(p("neighborhoods",t).then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),_(e)})),p("price_ranges",t).then((function(e){P(e)})))}),[t]);var ee=function(e,t){o(Le({},i,Object(u.a)({},t,e)))},te=function(e,t){return e.map((function(e){return r.a.createElement(Ae.a,{key:e.id,value:e.id},e["".concat(t)])}))};if(null===g||null===O)return r.a.createElement("p",null);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:(U?$.withHelp:$.noHelp)+" "+$.column},r.a.createElement("div",{className:$.requestContainer},r.a.createElement("h1",{className:$.requestTitle+" title-fantasy-font"},"What kind of night do you want?"),r.a.createElement("p",{className:$.helpLink,onClick:function(){return z(!0)}},U?null:"*Tell me more!"),r.a.createElement(j,null,M?r.a.createElement(re,{errors:M.fullMessages}):null,r.a.createElement(me,{legend:"Date and Time"},r.a.createElement(qe.a,{utils:Ie.a},r.a.createElement(Fe.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",label:"Date",minDate:V().add(1,"days").toDate(),value:i.start_date,onChange:function(e){return ee(e,"start_date")}}),r.a.createElement(Re.a,{disableToolbar:!0,variant:"inline",minutesStep:30,margin:"normal",label:"Time",value:i.start_time,onChange:function(e){return ee(e,"start_time")}}))),r.a.createElement(me,{legend:"Specifics"},r.a.createElement(W,{value:i.party_size,onChange:function(e){return ee(e.target.value,"party_size")},styles:$.filter},r.a.createElement(Ae.a,{value:"",disabled:!0},"Party Size"),r.a.createElement(Ae.a,{value:"1"},"1 person"),r.a.createElement(Ae.a,{value:"2"},"2 people"),r.a.createElement(Ae.a,{value:"3"},"3 people"),r.a.createElement(Ae.a,{value:"4"},"4 people")),r.a.createElement(W,{value:g,onChange:function(e){return b(e.target.value)},styles:$.filter},r.a.createElement(Ae.a,{value:"",disabled:!0},"Neighborhood"),te(C,"name")),r.a.createElement(W,{value:O,onChange:function(e){return w(e.target.value)},styles:$.filter},r.a.createElement(Ae.a,{value:"",disabled:!0},"Price Range"),te(N,"max_amount"))),r.a.createElement(me,{legend:"Contacts (up to 4)"},I.concat([""]).slice(0,4).map((function(e,t){return r.a.createElement(J,{key:t,width:"100px",placeholder:"Phone ".concat(t+1),value:e,type:"tel",onChange:function(e){return function(e,t){var n=I.slice();e.length?I.length===t?n.push(e):n[t]=e:t<I.length&&n.splice(t,1),q(n)}(e.target.value,t)}})}))),r.a.createElement(me,{legend:"Notes"},r.a.createElement(J,{blurb:!0,placeholder:"Any additional notes for us?",value:i.notes,onChange:function(e){return ee(e.target.value,"notes")}}))),r.a.createElement(E,{onClick:function(){L(null),function(e,t){var n=f(t);return fetch("".concat("/api/v1","/users/").concat(t.user.id,"/requests"),{method:"POST",headers:m({},d,{},n),body:JSON.stringify(m({},e,{user_id:t.user.id}))}).then((function(e){return e.json()}))}(function(){var e=new Date(i.start_date.getFullYear(),i.start_date.getMonth(),i.start_date.getDate(),i.start_time.getHours(),i.start_time.getMinutes()),t=V(e).add(4,"hours").toDate(),n=Le({},i,{start_time:e.toString(),end_time:t.toString(),neighborhood_id:g,price_range_id:O,contacts_attributes:I.map((function(e){return{phone:e}}))});return delete n.start_date,delete n.end_date,n}(),t).then((function(e){e.errors?(console.log("errors creating request!",e.errors),L({errorObj:e.errors.error_obj,fullMessages:e.errors.full_messages})):Q(!0)}))}},"Submit Request"),K?r.a.createElement(G,{acceptText:"Can't Wait!",navigateAwayAction:function(){e.history.push("/")},startOpen:!0},"Success! We will get busy setting up your perfect night out! You will get your first text on the day of your date at 10 am!"):null)),U?r.a.createElement("div",{className:$.column},r.a.createElement(X,null,r.a.createElement("h3",null,"Give us some guidance, then let us create the perfect night for you."),r.a.createElement("div",{className:$.helpText},r.a.createElement("p",null,"Choose the day and time for your date. Depending on your budget and special instructions, we will schedule up to a total duration of 4 hours."),r.a.createElement("p",null,"Which area of Seattle do you want to go to?"),r.a.createElement("p",null,"How big is your party? Let us know, we don't assume that everyone is a couple of 2 and we can make reservations for up to 4 people!"),r.a.createElement("p",null,"Let us know your approximate budget per person. We cannot guarantee we will be exact, but we always try our best!"),r.a.createElement("p",null,"Provide us up to four contact numbers where we will send text alerts containing your itinerary!"),r.a.createElement("p",null,"Leave us any special requests in the notes sections, such as dietary restrictions/time constraints, etc. We want to make this night perfect for you!")),r.a.createElement("h3",null,"Press submit when you're done!"),r.a.createElement(E,{onClick:function(){return z(!1)}},"Got it!"))):null)},Ue=Object(y.a)({column:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}}),We=function(e){var t=e.userData,n=e.match.params.id,l=Object(a.useState)(null),i=Object(c.a)(l,2),o=i[0],u=i[1],s=Ue();Object(a.useEffect)((function(){t&&h(t,n).then((function(e){u(e.request)}))}),[t]);return console.log(window.innerWidth,window.innerHeight),r.a.createElement(r.a.Fragment,null,o?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:s.column},r.a.createElement(te,{title:"".concat(function(){var e=V(o.start_time).startOf("h:mm a"),t=V();return e<t?"Your date was ".concat(e.fromNow()):e.diff(t,"days")<2?"Your date is tomorrow":"Your date is ".concat(e.fromNow())}(),"!"),request:o},new Date(o.start_time)>=new Date?r.a.createElement(G,{buttonText:"Cancel Request",declineText:"No way!",acceptText:"Yes, please cancel.",navigateAwayAction:function(){(function(e,t){var n=f(e);return fetch("".concat("/api/v1","/users/").concat(e.user.id,"/requests/").concat(t),{method:"PATCH",headers:m({},d,{},n),body:JSON.stringify({cancelled:!0})}).then((function(e){return e.json()}))})(t,n).then((function(t){e.history.push({pathname:"/",state:{cancelledRequest:t}})}))}},"Are you sure you want to cancel this request?"):null),new Date(o.start_time)<new Date?r.a.createElement(je,{request:o,userData:t}):null),r.a.createElement("div",{className:s.column},o.fulfilled?new Date(o.start_time)>new Date?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title-fantasy-font"},"Stay tuned..."),r.a.createElement(X,null,r.a.createElement("p",null,"Get excited! Your itinerary is all set. You will be getting text alerts starting on the morning of your date!"))):r.a.createElement(ce,{items:o.itinerary_items}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title-fantasy-font"},"Stay tuned..."),r.a.createElement(X,null,r.a.createElement("p",null,"We are busy working to get your night out all set up!"),r.a.createElement("p",null,"Check back soon for confirmation that your itinerary is ready..."))))):null)},ze=Object(y.a)({italicFont:{fontStyle:"italic"},listContainer:{gridColumn:"1/3"}}),Ge=function(e){var t=e.userData,n=Object(a.useState)([]),l=Object(c.a)(n,2),i=l[0],o=l[1],u=ze();Object(a.useEffect)((function(){t&&(console.log("fetching requests!",e.location.state),function(e){var t=f(e);return fetch("".concat("/api/v1","/users/").concat(e.user.id,"/requests"),{method:"GET",headers:m({},d,{},t)}).then((function(e){return e.json()}))}(t).then((function(e){return o(e)})))}),[e.location.state,t]);var s=function(e){for(var t="",n=e.itinerary_items.map((function(e){return e.place})),a=0;a<n.length;a++)a>0&&(t+=", "),t+=n[a];return t};return i?r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{styles:u.listContainer,title:"Upcoming Dates"},function(){var e=i.filter((function(e){return!e.cancelled&&new Date(e.start_time)>=new Date}));return e.length?e.map((function(e){return r.a.createElement(S,{styles:"threeColumns",key:e.id,id:e.id,destination:"/requests/".concat(e.id)},r.a.createElement("p",null,V(e.start_time).calendar()),r.a.createElement("p",null,e.neighborhood),r.a.createElement("p",null,e.fulfilled?"ITINERARY IS READY":"ITINERARY PENDING"))})):r.a.createElement("p",{className:u.italicFont},"Book some nights out!")}()),r.a.createElement(x,{styles:u.listContainer,title:"Past Dates"},function(){var e=i.filter((function(e){return!e.cancelled&&new Date(e.start_time)<new Date}));return e.length?(e.sort((function(e,t){return new Date(t.start_time)-new Date(e.start_time)})),e.map((function(e){return r.a.createElement(S,{styles:"threeColumns",key:e.id,id:e.id,destination:"/requests/".concat(e.id)},r.a.createElement("p",null,V(e.start_time).format("MMMM Do YYYY")),r.a.createElement("p",null,s(e)),r.a.createElement("p",null,e.review?r.a.createElement(xe,{review:e.review}):r.a.createElement("span",{className:u.italicFont},"Review this date!")))}))):r.a.createElement("p",{className:u.italicFont},"Your past dates will go here!")}())):null},He=Object(y.a)({mainContainer:{gridColumn:"1/3",gridRow:"auto",display:"flex",flexDirection:"column",alignItems:"center"},buttonsDiv:{width:"100%",margin:"20px 0 20px 0",display:"flex",flexFlow:"row wrap",justifyContent:"space-evenly"},filter:{padding:"20px 0px 20px 0px"},redText:{color:"red"},italicFont:{fontStyle:"italic"}}),Xe=function(e){var t=e.allRequests,n=Object(a.useState)("Unfulfilled"),l=Object(c.a)(n,2),i=l[0],o=l[1],u=He(),s=function(e){return e.filter((function(e){return!e.fulfilled&&!e.cancelled}))},m=function(e){return e.filter((function(e){return e.fulfilled&&!e.cancelled&&new Date(e.start_time)>=new Date}))},d=function(e){return e.filter((function(e){return e.cancelled&&e.fulfilled&&!e.admin_addressed_cancel}))},f=function(e){return e.filter((function(e){return e.review&&!e.review.admin_reviewed}))},p=function(e){return e.filter((function(e){return e.fulfilled&&!e.cancelled&&new Date(e.start_time)<new Date}))};return r.a.createElement("div",{className:u.mainContainer},r.a.createElement("div",{className:u.buttonsDiv},r.a.createElement(E,{styles:u.button,onClick:function(){return o("Unfulfilled")}},"Unfulfilled"," ",r.a.createElement("span",{className:u.italicFont},"(",s(t).length,")")),r.a.createElement(E,{styles:u.My,onClick:function(){return o("Fulfilled")}},"Fulfilled"," ",r.a.createElement("span",{className:u.italicFont},"(",m(t).length,")")),r.a.createElement(E,{styles:u.button,onClick:function(){return o("Cancelled")}},"Cancelled"," ",r.a.createElement("span",{className:u.italicFont},"(",d(t).length,")")),r.a.createElement(E,{styles:u.button,onClick:function(){return o("New Reviews")}},"New Reviews"," ",r.a.createElement("span",{className:u.italicFont},"(",f(t).length,")")),r.a.createElement(E,{styles:u.button,onClick:function(){return o("Completed")}},"Completed"," ",r.a.createElement("span",{className:u.italicFont},"(",p(t).length,")")),r.a.createElement(E,{styles:u.button,onClick:function(){return o("All")}},"All")),r.a.createElement(x,{title:i},function(){var e,n;return"Unfulfilled"===i?(e=s(t),n="twoColumns"):"Fulfilled"===i?(e=m(t),n="twoColumns"):"Cancelled"===i?(e=d(t),n="twoColumns"):"New Reviews"===i?(e=f(t),n="threeColumns"):"Completed"===i?(e=p(t),n="threeColumns"):(e=t,n="threeColumns"),"Unfulfilled"===i?e.sort((function(e,t){return new Date(e.start_time)-new Date(t.start_time)})):e.sort((function(e,t){return new Date(t.start_time)-new Date(e.start_time)})),e.length?e.map((function(e){var t;return t=e.fulfilled?new Date(e.start_time)<new Date&&!e.cancelled?"COMPLETED":"FULFILLED":"UNFULFILLED",r.a.createElement(S,{styles:n,key:e.id,id:e.id,destination:"/admin/requests/".concat(e.id)},r.a.createElement("p",null,V(e.start_time).calendar()),r.a.createElement("p",null,t,e.cancelled?r.a.createElement("span",{className:u.redText}," - CANCELLED"):null),e.review?r.a.createElement("p",null," ",r.a.createElement(xe,{review:e.review})," "):null)})):r.a.createElement("p",{className:u.italicFont},"No new requests for this category!")}()))},Ve=Object(y.a)({container:{gridColumn:"1/3",display:"flex",flexDirection:"column",alignItems:"center"},filter:{margin:"10px"}}),Ze=function(e){var t=e.userData,n=Object(a.useState)(""),l=Object(c.a)(n,2),i=l[0],o=l[1],u=Object(a.useState)(""),s=Object(c.a)(u,2),m=s[0],d=s[1],f=Object(a.useState)(null),h=Object(c.a)(f,2),g=h[0],b=h[1],v=Object(a.useState)(null),y=Object(c.a)(v,2),O=y[0],w=y[1],x=Object(a.useState)([]),k=Object(c.a)(x,2),C=k[0],_=k[1],D=Object(a.useState)([]),S=Object(c.a)(D,2),N=S[0],P=S[1],T=Object(a.useState)(null),A=Object(c.a)(T,2),I=A[0],q=A[1],F=e.match.params.id,R=Ve();Object(a.useEffect)((function(){t&&(p("neighborhoods",t).then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),_(e),b(e[0].id)})),p("price_ranges",t).then((function(e){P(e),w(e[0].id)})),e.edit&&be(t,F).then((function(e){o(e.title),d(e.blurb),b(e.neighborhood_id),w(e.price_range_id)})))}),[t]);var M=function(e,t){return e.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e["".concat(t)])}))};return null===g||null===O?r.a.createElement($,null):r.a.createElement("div",{className:R.container},r.a.createElement("h1",{className:"title-fantasy-font"},"Create New Itinerary Package"),r.a.createElement(j,null,I?r.a.createElement(re,{errors:I}):null,r.a.createElement(J,{placeholder:"Package title",value:i,onChange:function(e){return o(e.target.value)}}),r.a.createElement(W,{value:g,onChange:function(e){return b(e.target.value)},styles:R.filter},M(C,"name")),r.a.createElement(W,{value:O,onChange:function(e){return w(e.target.value)},styles:R.filter},M(N,"max_amount")),r.a.createElement(J,{blurb:!0,placeholder:"Write a blurb...",value:m,onChange:function(e){return d(e.target.value)}}),r.a.createElement(E,{onClick:function(){var n={title:i,blurb:m,neighborhood_id:g,price_range_id:O};(e.edit?function(){return function(e,t,n){var a=he(n);return fetch("".concat("/api/v1","/itinerary_packages/").concat(e),{method:"PUT",headers:fe({},pe,{},a),body:JSON.stringify(t)}).then((function(e){return e.json()}))}(F,n,t)}:function(){return function(e,t){var n=he(t);return fetch("".concat("/api/v1","/itinerary_packages"),{method:"POST",headers:fe({},pe,{},n),body:JSON.stringify(e)}).then((function(e){return e.json()}))}(n,t)})().then((function(t){t.errors?q({errorObj:t.errors.error_obj,fullMessages:t.errors.full_messages}):e.history.push("/admin/itinerary_packages/".concat(t.id))}))}},"Submit")))},Ke=Object(y.a)({cardsContainer:{width:"100%",display:"flex",flexFlow:"row wrap",justifyContent:"space-evenly"},column:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},container:{width:"100%",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},italic:{fontStyle:"italic"},blurb:{width:"50%",resize:"none",margin:"10px"},buttons:{width:"100%",padding:"0 40px 0 40px",display:"flex",flexDirection:"column",alignItems:"center"},link:{margin:"10px"},title:{marginBottom:"0px"}}),Qe=function(e){var t=e.onSubmit,n=Object(a.useState)(""),l=Object(c.a)(n,2),i=l[0],o=l[1],u=Object(a.useState)(""),s=Object(c.a)(u,2),m=s[0],d=s[1],f=Object(a.useState)(""),p=Object(c.a)(f,2),h=p[0],g=p[1],b=Object(a.useState)(""),v=Object(c.a)(b,2),y=v[0],O=v[1],w=Object(a.useState)(""),x=Object(c.a)(w,2),k=x[0],C=x[1],_=Object(a.useState)(""),D=Object(c.a)(_,2),S=D[0],P=D[1],T=Object(a.useState)(""),A=Object(c.a)(T,2),I=A[0],q=A[1],F=Ke(),R=function(e,t){var n=encodeURI(e+" "+t);return"https://www.google.com/maps/embed/v1/place?key=".concat("AIzaSyCOyujenXkNqsCLNFS0JJS7aZ36oaeUhWs","&q=").concat(n)};return r.a.createElement(j,null,r.a.createElement(J,{placeholder:"Duration (minutes)",value:i,onChange:function(e){return o(e.target.value)}}),r.a.createElement(J,{placeholder:"Venue Name",value:h,onChange:function(e){return g(e.target.value)}}),r.a.createElement(J,{placeholder:"Address",value:m,onChange:function(e){return d(e.target.value)}}),r.a.createElement(J,{blurb:!0,placeholder:"Blurb",value:y,onChange:function(e){return O(e.target.value)}}),r.a.createElement("div",{className:F.links},r.a.createElement(J,{placeholder:"Make reservation link",value:k,onChange:function(e){return C(e.target.value)}}),r.a.createElement(J,{placeholder:"Map URL",value:I,onChange:function(e){return q(e.target.value)}})),r.a.createElement("div",{className:F.buttons},r.a.createElement(E,{onClick:function(){P(R(h,m))}},"Generate Map"),S?r.a.createElement(N,{width:"75%",height:"300px",url:S}):null,r.a.createElement(E,{onClick:function(){t({duration:i,address:m,place:h,blurb:y,make_res_link:k,map_iframe_url:S,map_url:I}),o(""),d(""),g(""),O(""),C(""),P(""),q("")}},"Add Item To Package")))},$e=function(e){var t=e.userData,n=e.match.params.id,l=Object(a.useState)(null),i=Object(c.a)(l,2),u=i[0],s=i[1],m=Object(a.useState)([]),d=Object(c.a)(m,2),f=d[0],p=d[1],h=Ke();Object(o.g)();Object(a.useEffect)((function(){t&&be(t,n).then((function(e){s(e),p(e.itinerary_package_items)}))}),[t]);var g=function(e){!function(e,t,n){var a=he(e);fetch("".concat("/api/v1","/itinerary_packages/").concat(t,"/itinerary_package_items/").concat(n),{method:"DELETE",headers:fe({},pe,{},a)})}(t,u.id,e);var n=f.filter((function(t){return t.id!==e}));p(n)};if(null===u||null===f)return r.a.createElement("p",null,"Loading...");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:h.column},r.a.createElement("div",{className:h.container},r.a.createElement("h1",{className:h.title+" title-fantasy-font"},"Itinerary Package: ",u.title)," ",r.a.createElement(_,{styles:h.link,destination:"/admin/itinerary_packages/".concat(u.id,"/edit")},"Edit"),r.a.createElement(_e,null,function(){if(u){var e=u;return r.a.createElement("div",null,r.a.createElement("p",null,"Neighborhood: ",e.neighborhood),r.a.createElement("p",null,"Blurb: ",e.blurb),r.a.createElement("p",null,"Price Range: ",e.price_range))}}()),r.a.createElement("h2",{className:"title-fantasy-font"},"Package Items:"),f.length?r.a.createElement("div",{className:h.cardsContainer},f.map((function(e){return r.a.createElement(A,{pkgItem:e,handleDelete:g})}))):r.a.createElement("p",{className:h.italic},"No Items"))),r.a.createElement("div",{className:h.column},r.a.createElement("div",{className:h.container},r.a.createElement("h2",{className:"title-fantasy-font"},"Add Items"),r.a.createElement(Qe,{onSubmit:function(e){(function(e,t,n){var a=he(n);return fetch("".concat("/api/v1","/itinerary_packages/").concat(e,"/itinerary_package_items"),{method:"POST",headers:fe({},pe,{},a),body:JSON.stringify(t)}).then((function(e){return e.json()}))})(n,e,t).then((function(e){p(f.concat([e]))}))}}))))},et=Object(y.a)({packages:{gridColumn:"1/3"},details:{gridColumn:"1/3",textAlign:"center"},filter:{padding:"20px 0px 20px 0px"}}),tt=function(e){var t=e.userData,n=Object(a.useState)([]),l=Object(c.a)(n,2),i=l[0],o=l[1],u=Object(a.useState)("All"),s=Object(c.a)(u,2),m=s[0],d=s[1],f=et();Object(a.useEffect)((function(){t&&ge(t).then((function(e){return o(e)}))}),[t]);var p=function(e){var t=e.reduce((function(e,t){return e+t.duration}),0);if(t>=60){var n=Math.floor(t/60),a=t-60*n;return"".concat(n," hr ").concat(a," min")}return"".concat(t," min")},h=function(e){d(e.target.value)};return r.a.createElement(r.a.Fragment,null,i.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:f.details},r.a.createElement("h1",{className:"title-fantasy-font"},"Itinerary Packages"),r.a.createElement(_,{destination:"/admin/itinerary_packages/new"},"Make a New Package"),r.a.createElement(W,{styles:f.filter,title:"Choose Neighborhood: ",value:m,onChange:h},r.a.createElement(Ae.a,{value:"All"},"All"),function(){if(i)return i.map((function(e){return e.neighborhood})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return r.a.createElement(Ae.a,{value:e},e)}))}())),r.a.createElement(x,{styles:f.packages},("All"!==m?i.filter((function(e){return e.neighborhood===m})):i).map((function(e){return r.a.createElement(S,{styles:"fourColumns",key:e.id,id:e.id,destination:"/admin/itinerary_packages/".concat(e.id)},r.a.createElement("p",null,e.title),r.a.createElement("p",null,e.price_range.split(" ")[0]),r.a.createElement("p",null,e.neighborhood),r.a.createElement("p",null,p(e.itinerary_package_items)))})))):null)};function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rt=function(e){var t=Object(a.useState)({email:"",password:""}),n=Object(c.a)(t,2),l=n[0],i=n[1],o=Object(a.useState)(null),s=Object(c.a)(o,2),m=s[0],d=s[1],f=function(e){d(null),i(at({},l,Object(u.a)({},e.target.name,e.target.value)))};return r.a.createElement(R,{title:"DateNight Admin Login"},r.a.createElement(j,null,m?r.a.createElement(re,{errors:m}):null,r.a.createElement(J,{type:"text",name:"email",value:l.email,onChange:f,placeholder:"Email"}),r.a.createElement(J,{type:"password",name:"password",value:l.password,onChange:f,placeholder:"Password"}),r.a.createElement(E,{onClick:function(){var t;(function(e){return fetch("".concat("/admin_auth","/sign_in"),{method:"POST",headers:pe,body:JSON.stringify(e)})})(l).then((function(e){if(e.status<400){var n=e.headers.get("access-token"),a=e.headers.get("client"),r=e.headers.get("uid"),l=e.headers.get("expiry");t={accessToken:n,client:a,expiry:l,uid:r}}return e.json()})).then((function(n){n.errors?d(n.errors):(t=at({},t,{user:n.data,admin:!0}),e.handleLogin(t),e.history.push("/admin"))})),i({email:"",password:""})}},"Login")))};function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var it=Object(y.a)({column:{width:"100%"},addBtn:{margin:"0px 0px 20px 0px"},timePicker:{width:"100%"},emptyItin:{fontStyle:"italic"},button:{marginTop:"20px"},filter:{marginBottom:"20px"},contactBtn:{marginTop:"0px"},scrapedListItem:{"&:hover":{cursor:"pointer",color:"turquoise"}},buttonDiv:{width:"400px",display:"flex",flexFlow:"row wrap",justifyContent:"space-evenly",margin:"10px 0 16px 0"},venueContainer:{width:"100%",textAlign:"center"},cancelText:{gridColumn:"1/3",margin:"0 auto 0 auto",padding:"10px",display:"flex",flexFlow:"row wrap",justifyContent:"center",alignItems:"center",height:"100px"},cancelBtn:{height:"40px"},modalBlurb:{height:"50%",overflow:"scroll"}}),ct=function(e){var t=e.userData,n=e.handleInvalidatedRequest,l=Object(a.useState)(!1),i=Object(c.a)(l,2),o=i[0],s=i[1],m=e.match.params.id,d=Object(a.useState)(null),f=Object(c.a)(d,2),g=f[0],b=f[1],v=Object(a.useState)(null),y=Object(c.a)(v,2),O=y[0],j=y[1],w=Object(a.useState)([]),k=Object(c.a)(w,2),C=k[0],D=k[1],S=Object(a.useState)(null),N=Object(c.a)(S,2),P=N[0],T=N[1],A=Object(a.useState)(null),I=Object(c.a)(A,2),q=I[0],F=I[1],R=Object(a.useState)(null),M=Object(c.a)(R,2),L=M[0],Y=M[1],B=Object(a.useState)("All"),J=Object(c.a)(B,2),U=J[0],z=J[1],H=Object(a.useState)(!1),X=Object(c.a)(H,2),Z=X[0],K=X[1],Q=Object(a.useState)(!0),$=Object(c.a)(Q,2),ee=$[0],ne=$[1],ae=Object(a.useState)([]),re=Object(c.a)(ae,2),le=re[0],ie=re[1],oe=it();Object(a.useEffect)((function(){t&&(h(t,m).then((function(e){b(e.request),s(!0),ve(t,V(e.request.start_time).format("YYYY-MM-DD")).then((function(e){D(e),s(!1)}))})),ge(t).then(j),p("neighborhoods",t).then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),ie(e)})))}),[t]);var ue=function(e){(function(e,t,n){var a=he(n);return fetch("".concat("/api/v1","/requests/").concat(e,"/itinerary_packages"),{method:"POST",headers:fe({},pe,{},a),body:JSON.stringify({itinerary_package_id:t})}).then((function(e){return e.json()}))})(m,e,t).then((function(e){return b(e.request)}))},se=function(e){(function(e,t){var n=he(e);return fetch("".concat("/api/v1","/itinerary_items/").concat(t),{method:"DELETE",headers:fe({},pe,{},n)})})(t,e.id).then((function(){h(t,m).then((function(e){b(e.request)}))}))},me=function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},P,{reservation_time:q,map_iframe_url:L});(function(e,t,n){var a=he(e);return fetch("".concat("/api/v1","/requests/").concat(n,"/itinerary_items"),{method:"POST",headers:fe({},pe,{},a),body:JSON.stringify(t)}).then((function(e){return e.json()}))})(t,e,m).then((function(e){b(e.request)}))},de=function(){return o?be():C.length?C.filter((function(e,t){return C.indexOf(C.find((function(t){return t.name===e.name})))===t})).map((function(e,n){return r.a.createElement("li",{className:oe.scrapedListItem,key:n,onClick:function(){(function(e,t){var n=he(e);return fetch("".concat("/api/v1","/scrapes/single_page"),{method:"POST",headers:fe({},pe,{},n),body:JSON.stringify({link:t.link})}).then((function(e){return e.json()}))})(t,e).then((function(e){T(e),function(e,t){var n=encodeURI(e+" "+t),a="https://www.google.com/maps/embed/v1/place?key=".concat("AIzaSyCOyujenXkNqsCLNFS0JJS7aZ36oaeUhWs","&q=").concat(n);Y(a)}(e.name,e.address)}))}},e.name)})):r.a.createElement("p",null,"There are no venues available for that specification.")},be=function(){return r.a.createElement("p",null,"Loading...")};return g?r.a.createElement(r.a.Fragment,null,g.cancelled&&g.fulfilled&&!g.admin_addressed_cancel?r.a.createElement("div",{className:oe.cancelText},r.a.createElement("h2",null,"Admin has addressed cancellation:"),r.a.createElement(E,{styles:oe.cancelBtn,onClick:function(){return function(e,t,n){var a=he(e);return fetch("".concat("/api/v1","/requests/").concat(t),{method:"PATCH",headers:fe({},pe,{},a),body:JSON.stringify({admin_addressed_cancel:n})}).then((function(e){return e.json()}))}(t,g.id,new Date).then((function(t){n(t.request.id),e.history.push({pathname:"/admin",state:{id:g.id}})}))}},"YES")):null,r.a.createElement("div",{className:oe.column},r.a.createElement(te,{className:oe.requestContainer,title:"Request",request:g,admin:!0},new Date(g.start_time)>=new Date&&!g.cancelled?r.a.createElement("div",{className:oe.buttonDiv},r.a.createElement(E,{type:"button",onClick:function(){(function(e,t,n){var a=he(e);return fetch("".concat("/api/v1","/requests/").concat(t),{method:"PATCH",headers:fe({},pe,{},a),body:JSON.stringify({fulfilled:n})}).then((function(e){return e.json()}))})(t,m,!g.fulfilled).then((function(e){b(e.request),n(e.request.id),K(!1)}))}},g.fulfilled?"Mark as incomplete":"Mark as complete"),g.fulfilled?r.a.createElement(E,{type:"button",onClick:function(){!function(e,t){var n=he(e);fetch("".concat("/api/v1","/texts"),{method:"POST",headers:fe({},pe,{},n),body:JSON.stringify({request_id:t})})}(t,m)}},"Alert (DEMO ONLY)"):null,g.fulfilled||Z?null:r.a.createElement(E,{styles:oe.addBtn,type:"button",onClick:function(){return K(!0)}},"Add to Itinerary")):null),new Date(g.start_time)<new Date?r.a.createElement(je,{admin:!0,request:g,userData:t,handleInvalidatedRequest:n}):null,Z?r.a.createElement(ce,{items:g.itinerary_items,admin:!0,handleRemove:se},g.itinerary_items.length?null:r.a.createElement("p",{className:oe.emptyItin},"Add some venues!")):null),r.a.createElement("div",{className:oe.column},Z?function(){var e=ee?"Packages":"Single Venues",n=ee?"Venues for ".concat(V(g.start_time).format("MMMM Do YYYY")):"Packages";return r.a.createElement("div",{className:oe.venueContainer},r.a.createElement(E,{styles:oe.button,onClick:function(){return ne(!ee)}},e),r.a.createElement(x,{title:n,filter:ee?r.a.createElement(W,{styles:oe.filter,value:U,onChange:function(e){z(e.target.value),s(!0),ve(t,V(g.start_time).format("YYYY-MM-DD"),e.target.value).then((function(e){s(!1),D(e)}))}},r.a.createElement(Ae.a,{value:"All"},"All"),le.map((function(e){return r.a.createElement(Ae.a,{key:e.id,value:e.name},e.name)}))):null},ee?de():O.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(_,{destination:"/admin/itinerary_packages/".concat(e.id)},e.price_range.split(" ")[0]," - ",e.neighborhood," - ",e.title),r.a.createElement(E,{type:"button",onClick:function(){return ue(e.id)}},"Apply"))}))))}():r.a.createElement(ce,{items:g.itinerary_items,admin:!0,handleRemove:se})),P?function(){var e=P.neighborhood?P.neighborhood:"Seattle";return r.a.createElement(G,{startOpen:!0,acceptText:"Add to Itinerary",navigateAwayAction:function(){me(),T(null)},declineText:"Back",closeAction:function(){return T(null)}},r.a.createElement("h2",null,P.name),r.a.createElement("p",null,e+" \u2022 "+P.cuisine+" \u2022 "+P.price),r.a.createElement("p",{className:oe.modalBlurb},P.blurb),r.a.createElement("a",{href:P.make_res_link,target:"_blank"},"Reservation Link"),r.a.createElement("div",{className:oe.timePicker},r.a.createElement(qe.a,{className:oe.timePicker,utils:Ie.a},r.a.createElement(Re.a,{disableToolbar:!0,variant:"inline",minutesStep:15,margin:"normal",label:"Time",value:q,onChange:function(e){return F(e)}}))))}():null):null},ot=Object(y.a)({"@global":{"*":{boxSizing:"border-box",fontFamily:"Noto Sans, sans-serif"},body:{margin:"0px",overflowX:"hidden"},"#root":{maxWidth:"1500px",marginLeft:"auto",marginRight:"auto",minHeight:"100vh",display:"grid",gridTemplateRows:"50px auto 200px",gridTemplateAreas:"\n      'navbar'\n      'main'\n      'footer'",justifyItems:"center"},".title-fantasy-font":{fontFamily:"Chalkduster, fantasy"}},mainContainer:{gridArea:"main",width:"100%",padding:"0 20px 20px 20px","@media all and (min-width: 900px)":{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:"10px"}}}),ut=function(){var e=ot(),t=Object(a.useState)(function(){var e=localStorage.getItem("userData");return e?JSON.parse(e):null}()),n=Object(c.a)(t,2),l=n[0],i=n[1],u=!!l,s=Object(a.useState)([]),p=Object(c.a)(s,2),h=p[0],g=p[1],b=Object(a.useState)(null),v=Object(c.a)(b,2),E=v[0],y=v[1],O=function(e){localStorage.setItem("userData",JSON.stringify(e)),i(e)};Object(a.useEffect)((function(){var e=!1;return l&&function(e){var t=he(e);return fetch("".concat("/api/v1","/requests"),{method:"GET",headers:fe({},pe,{},t)}).then((function(e){return e.json()}))}(l).then((function(t){e||g(t)})),function(){e=!0}}),[l]),Object(a.useEffect)((function(){E&&function(e,t){var n=he(e);return fetch("".concat("/api/v1","/requests/").concat(t),{method:"GET",headers:fe({},pe,{},n)}).then((function(e){return e.json()}))}(l,E).then((function(e){var t=h.map((function(t){return t.id===e.request.id?e.request:t}));g(t)}))}),[E]);var j=function(e){y(e)};return r.a.createElement(r.a.Fragment,null,u?r.a.createElement(L,{logoutAdmin:function(){!function(e){var t=he(e);fetch("".concat("/admin_auth","/sign_out"),{method:"DELETE",headers:fe({},pe,{},t)})}(l),localStorage.removeItem("userData"),i(null)},logoutUser:function(){!function(e){var t=f(e);fetch("".concat("/auth","/sign_out"),{method:"DELETE",headers:m({},d,{},t)})}(l),localStorage.removeItem("userData"),i(null)},userData:l}):null,r.a.createElement("div",{className:e.mainContainer},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/login",render:function(e){return u?r.a.createElement(o.a,{to:"/"}):r.a.createElement(Ne,Object.assign({},e,{handleLogin:O}))}}),r.a.createElement(o.b,{path:"/signup",render:function(e){return u?r.a.createElement(o.a,{to:"/"}):r.a.createElement(Te,e)}}),r.a.createElement(o.b,{path:"/requests/:id/edit",render:function(e){return u&&!l.admin?r.a.createElement(Je,Object.assign({edit:!0},e,{userData:l})):null}}),r.a.createElement(o.b,{path:"/requests/new",render:function(e){return u&&!l.admin?r.a.createElement(Je,Object.assign({},e,{userData:l})):null}}),r.a.createElement(o.b,{path:"/requests/:id",render:function(e){return u&&!l.admin?r.a.createElement(We,Object.assign({},e,{userData:l})):null}}),r.a.createElement(o.b,{path:"/admin/login",render:function(e){return r.a.createElement(rt,Object.assign({},e,{handleLogin:O}))}}),r.a.createElement(o.b,{path:"/admin/itinerary_packages/new",render:function(e){return r.a.createElement(Ze,Object.assign({},e,{userData:l}))}}),r.a.createElement(o.b,{path:"/admin/itinerary_packages/:id/edit",render:function(e){return r.a.createElement(Ze,Object.assign({},e,{edit:!0,userData:l}))}}),r.a.createElement(o.b,{path:"/admin/itinerary_packages/:id",render:function(e){return r.a.createElement($e,Object.assign({},e,{userData:l}))}}),r.a.createElement(o.b,{path:"/admin/itinerary_packages",render:function(e){return r.a.createElement(tt,Object.assign({},e,{userData:l}))}}),r.a.createElement(o.b,{path:"/admin/requests/:id",render:function(e){return r.a.createElement(ct,Object.assign({},e,{userData:l,handleInvalidatedRequest:j}))}}),r.a.createElement(o.b,{path:"/admin",render:function(e){return u&&l.admin?r.a.createElement(Xe,Object.assign({},e,{allRequests:h,userData:l})):r.a.createElement(o.a,{to:"/admin/login"})}}),r.a.createElement(o.b,{path:"/",render:function(e){return u&&!l.admin?r.a.createElement(Ge,Object.assign({},e,{userData:l})):r.a.createElement(o.a,{to:"/login"})}}))),r.a.createElement(q,null))};i.a.render(r.a.createElement(k.a,null,r.a.createElement(ut,null)),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.07dc1934.chunk.js.map